<?xml version="1.0" encoding="UTF-8"?>
<noteApp>
<html>
<head>
<title>Advanced Note App - Monochrome</title>

<style>
:root {
  --bg: #000000;
  --panel: #111111;
  --text: #ffffff;
  --text-muted: #888888;
  --card-bg: #222222;
  --modal-bg: #111111;
}

body.white {
  --bg: #ffffff;
  --panel: #f0f0f0;
  --text: #000000;
  --text-muted: #555555;
  --card-bg: #dddddd;
  --modal-bg: #ffffff;
}

body {
  margin: 0;
  background: var(--bg);
  font-family: "Inter", sans-serif;
  display: flex;
  justify-content: center;
  padding: 20px;
  min-height: 100vh;
  color: var(--text);
}

#phoneContainer {
  width: 400px;
  max-width: 95%;
  background: var(--panel);
  border-radius: 28px;
  padding: 25px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.4);
  overflow-y: auto;
}

.searchBar {
  width: 100%;
  background: var(--panel);
  color: var(--text);
  padding: 12px 16px;
  border-radius: 14px;
  font-size: 14px;
  border: 1px solid var(--text-muted);
  outline: none;
}

.tabs {
  display: flex;
  gap: 25px;
  margin-top: 25px;
  margin-bottom: 10px;
}

.tabs div {
  color: var(--text-muted);
  font-size: 15px;
  cursor: pointer;
}

.tabs .active {
  color: var(--text);
  font-weight: 600;
  border-bottom: 2px solid var(--text);
  padding-bottom: 4px;
}

#notesList {
  display: grid;
  grid-template-columns: 1fr;
  gap: 14px;
  margin-top: 20px;
}

.noteItem {
  padding: 12px 12px 12px 18px;
  border-radius: 22px;
  min-height: 100px;
  font-weight: 600;
  font-size: 15px;
  color: var(--text);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  cursor: pointer;
  position: relative;
  background: var(--card-bg) !important;
}

.deleteBtn {
  margin-top: 10px;
  width: 100%;
  padding: 6px 0;
  border-radius: 12px;
  border: none;
  background: #ff4f4f;
  color: white;
  cursor: pointer;
}

#addBtn {
  position: fixed;
  bottom: 40px;
  right: 40px;
  width: 55px;
  height: 55px;
  border-radius: 50%;
  background: #e04f4f;
  border: none;
  cursor: pointer;
  font-size: 26px;
  font-weight: bold;
  color: white;
}

#themeToggle {
  position: fixed;
  top: 30px;
  right: 40px;
  width: 70px;
  height: 36px;
  border-radius: 20px;
  background: linear-gradient(135deg, #444, #222);
  border: none;
  color: #fff;
  cursor: pointer;
  font-weight: 600;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  transition: background 0.3s, transform 0.2s;
}

#themeToggle:hover {
  background: linear-gradient(135deg, #666, #444);
  transform: scale(1.05);
}

#modalOverlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.55);
  justify-content: center;
  align-items: center;
}

#modal {
  width: 320px;
  background: var(--modal-bg);
  color: var(--text);
  padding: 20px;
  border-radius: 18px;
}

#modal textarea {
  width: 100%;
  height: 120px;
  padding: 12px;
  border-radius: 12px;
  border: 1px solid var(--text-muted);
  resize: vertical;
  margin-bottom: 10px;
  background: var(--panel);
  color: var(--text);
}

.colorPicker {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
}

.colorOption {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  border: 2px solid var(--text-muted);
  cursor: pointer;
}

.colorOption.selected {
  border: 3px solid var(--text);
}

#modalOptions {
  display: flex;
  justify-content: space-between;
}

#saveModalBtn, #closeModalBtn, #voiceBtn {
  padding: 10px 18px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
}

#saveModalBtn { background: #3bb273; color: white; }
#closeModalBtn { background: #bbbbbb; }
#voiceBtn { background: #4c82ff; color: white; }
</style>
</head>

<body class="dark">

<button id="themeToggle">Toggle Theme</button>

<div id="phoneContainer">
  <input type="text" id="search" class="searchBar" placeholder="Search note">
  <div class="tabs">
    <div class="active" data-tab="notes" onclick="switchTab('notes')">Notes</div>
    <div data-tab="lists" onclick="switchTab('lists')">Lists</div>
    <div data-tab="recordings" onclick="switchTab('recordings')">Recordings</div>
  </div>
  <div id="notesList"></div>
</div>

<button id="addBtn">+</button>

<div id="modalOverlay">
  <div id="modal">
    <textarea id="modalText"></textarea>
    <div class="colorPicker" id="colorPicker"></div>
    <div id="modalOptions">
      <button id="voiceBtn">Voice</button>
      <button id="closeModalBtn">Close</button>
      <button id="saveModalBtn">Save</button>
    </div>
  </div>
</div>

<script>
const colors=["#000000","#111111","#222222","#555555","#888888","#aaaaaa"];
let notes=JSON.parse(localStorage.getItem("notes")||"[]");
let noteColors=JSON.parse(localStorage.getItem("noteColors")||"[]");
let lists=JSON.parse(localStorage.getItem("lists")||"[]");
let recordings=JSON.parse(localStorage.getItem("recordings")||"[]");
let editingIndex=null;
let activeTab="notes";
let selectedColor=colors[0];

const colorPicker=document.getElementById("colorPicker");
function createColorOptions(){
  colorPicker.innerHTML="";
  colors.forEach(c=>{
    const div=document.createElement("div");
    div.className="colorOption";
    div.style.background=c;
    if(c===selectedColor) div.classList.add("selected");
    div.onclick=()=>{
      selectedColor=c;
      document.querySelectorAll(".colorOption").forEach(d=>d.classList.remove("selected"));
      div.classList.add("selected");
    };
    colorPicker.appendChild(div);
  });
}
createColorOptions();

function switchTab(tab){
  activeTab=tab;
  document.querySelectorAll(".tabs div").forEach(t=>t.classList.remove("active"));
  document.querySelector(`.tabs div[data-tab="${tab}"]`).classList.add("active");
  (tab==="notes")?renderNotes():(tab==="lists")?renderLists():renderRecordings();
}

function renderNotes(list=notes){
  const container=document.getElementById("notesList"); container.innerHTML="";
  list.forEach((item,index)=>{
    const card=document.createElement("div");
    card.className="noteItem"; 
    card.style.background=noteColors[index]||colors[Math.floor(Math.random()*colors.length)];
    card.textContent=item;
    card.onclick=()=>openEditor("notes",index);
    const del=document.createElement("button"); del.className="deleteBtn"; del.textContent="Delete";
    del.onclick=(e)=>{e.stopPropagation(); deleteItem("notes",index);};
    card.appendChild(del);
    container.appendChild(card);
  });
}

function renderLists(list=lists){
  const container=document.getElementById("notesList"); container.innerHTML="";
  list.forEach((item,index)=>{
    const card=document.createElement("div");
    card.className="noteItem"; 
    card.style.background=colors[Math.floor(Math.random()*colors.length)];
    card.textContent=item;
    card.onclick=()=>openEditor("lists",index);
    const del=document.createElement("button"); del.className="deleteBtn"; del.textContent="Delete";
    del.onclick=(e)=>{e.stopPropagation(); deleteItem("lists",index);};
    card.appendChild(del);
    container.appendChild(card);
  });
}

function renderRecordings(){
  const container=document.getElementById("notesList"); container.innerHTML="";
  recordings.forEach((item,index)=>{
    const card=document.createElement("div");
    card.className="noteItem"; card.style.background=colors[Math.floor(Math.random()*colors.length)];
    card.textContent="Recording "+(index+1);
    card.onclick=()=>playRecording(index);
    const del=document.createElement("button"); del.className="deleteBtn"; del.textContent="Delete";
    del.onclick=(e)=>{e.stopPropagation(); deleteItem("recordings",index);};
    card.appendChild(del);
    container.appendChild(card);
  });
}

function openEditor(type,index=null){
  editingIndex=index; activeTab=type;
  if(type==="notes"){
    document.getElementById("modalText").value=(index!==null)?notes[index]:"";
    selectedColor=(index!==null)?(noteColors[index]||colors[0]):colors[0];
    createColorOptions();
  } else {
    document.getElementById("modalText").value=(index!==null)?lists[index]:"";
  }
  document.getElementById("modalOverlay").style.display="flex";
}

document.getElementById("closeModalBtn").onclick=()=>{document.getElementById("modalOverlay").style.display="none";};

document.getElementById("saveModalBtn").onclick=()=>{
  const text=document.getElementById("modalText").value.trim(); if(!text) return;
  if(activeTab==="notes"){
    if(editingIndex===null){ notes.push(text); noteColors.push(selectedColor);}
    else { notes[editingIndex]=text; noteColors[editingIndex]=selectedColor;}
    localStorage.setItem("notes",JSON.stringify(notes));
    localStorage.setItem("noteColors",JSON.stringify(noteColors));
    renderNotes();
  }
  if(activeTab==="lists"){
    if(editingIndex===null) lists.push(text); else lists[editingIndex]=text;
    localStorage.setItem("lists",JSON.stringify(lists));
    renderLists();
  }
  document.getElementById("modalOverlay").style.display="none";
};

function deleteItem(type,index){
  if(type==="notes"){ notes.splice(index,1); noteColors.splice(index,1); localStorage.setItem("notes",JSON.stringify(notes)); localStorage.setItem("noteColors",JSON.stringify(noteColors)); renderNotes();}
  if(type==="lists"){ lists.splice(index,1); localStorage.setItem("lists",JSON.stringify(lists)); renderLists();}
  if(type==="recordings"){ recordings.splice(index,1); localStorage.setItem("recordings",JSON.stringify(recordings)); renderRecordings();}
}

document.getElementById("addBtn").onclick=()=>{editingIndex=null; document.getElementById("modalText").value=""; openEditor(activeTab);};

document.getElementById("themeToggle").onclick=()=>{document.body.classList.toggle("white");};

document.getElementById("search").oninput=(e)=>{
  const q=e.target.value.toLowerCase();
  if(activeTab==="notes") renderNotes(notes.filter(n=>n.toLowerCase().includes(q)));
  if(activeTab==="lists") renderLists(lists.filter(n=>n.toLowerCase().includes(q)));
};

function playRecording(index){alert("Audio playback not yet implemented.");}

const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;
const recognition=new SpeechRecognition();
recognition.lang="en-US"; recognition.continuous=false;
document.getElementById("voiceBtn").onclick=()=>{recognition.start();};
recognition.onresult=(event)=>{document.getElementById("modalText").value+=" "+event.results[0][0].transcript;};

renderNotes();
</script>
</body>
</html>
</noteApp>
